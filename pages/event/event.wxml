<cu-custom bindtap = "goToHome"isBack="{{true}}">
    <view bindtap = "goToHome"slot="backText" class = "back">save</view>
    <view slot="content" class = "nav">Letslist</view>
</cu-custom>

<view class="container">

  <view class = "con_2">
    <view class="banner">
      <view>{{event.name}}</view>
      <view class="banner-date">{{event.date}}</view>
    </view>

    <view class="invite" bindtap='onShareAppMessage' open-type="share">
      <button style='opacity: 100;' class="button" bindtap='onShareAppMessage' open-type="share">
        <view>
          <text class="cuIcon-friendadd"></text> 
        </view>
      </button>
      <text class="invite-txt">Invite friends</text>
    </view>

    <block
        wx:for="{{event.participants}}"
        wx:key="index"
        wx:for-item="participant"
    >

      <view class="user-card">

        <view class="profile-box">
          <view class = "master">
            <text wx:if="{{participant.is_creator == true}}" class="cuIcon-crownfill"></text>
            <image class="avatar" src="{{participant.avatar}}"></image>
          </view>

          <view>
            <view class="friend-name">{{participant.nickname}} brings</view>
            <view wx:if="{{inputPrice[participant.participant_id] !== true}}"class = "price" bindinput = "handlePrice" bindtap = "clickPrice">
              <text wx:if="{{price === undefined}}">input price here</text>
              <text wx:elif="{{price !== undefined}}">{{participant.expenses}}</text>
            </view> 

            <view wx:elif="{{inputPrice[participant.participant_id] == true}}">
              <form >
                  <view wx:if="{{inputPrice[participant.participant_id] == true}}" class="form">

                    <view  class="input">
                      <input class = "type" bindinput = "handlePrice" placeholder="Type total price here"></input>
                    </view> 

                    <view  class="add_price">
                      <button form-type="submit" bindtap="showPrice"class= "add_p">Add</button>
                    </view> 
                  </view>    
              </form>  
            </view>

          </view>   
        </view>

        <view class = "two">
          <view class="view_1">
            <block
                wx:for="{{participant.personal_list}}"
                wx:key="index"
                wx:for-item="myItem"
            >
              <text class="item" data-index="{{index}}" data-eventsitemid="{{myItem.events_item_id}}" data-participantid="{{participant.participant_id}}" bindtap="clickTakenItem">{{myItem.name}}</text>
            </block>  
          </view>
        </view>

      </view>
      
    </block>

  </view>


  <view class = "bring">
    <view class="add">
      <view>Items to bring</view>
      <view><text class="cuIcon-roundadd" bindtap="goToItems"></text></view>
    </view>

    <view class="profile-box">
        <view class="view_2">
          <block
              wx:for="{{event.not_taken_items}}"
              wx:key="index"
              wx:for-item="notTakenItem"
          >
            <text class="item" data-index="{{index}}" bindtap="clickNotTakenItem">{{notTakenItem.name}}</text>
          </block>  
        </view>
    </view>
  </view>
  
  <view bindtap="goToList" class="finish">
    <text class="finish_button">Finish the event</text>
  </view>

</view>
